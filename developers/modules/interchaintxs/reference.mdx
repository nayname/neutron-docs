---
title: "Reference"
description: "Complete technical reference for the Interchain Transactions module"
---

This page provides comprehensive technical documentation for the Interchain Transactions module, combining all API specifications, message types, query endpoints, parameters, events, state structures, and integration information in a single reference document.

<Warning>
The Interchain Transactions module is designed exclusively for CosmWasm smart contracts. Individual users cannot directly register interchain accounts or submit transactions through CLI commands.
</Warning>

## Parameters

The Interchain Transactions module's behavior is governed by the following parameters:

| Parameter | Type | Description |
| --- | --- | --- |
| `msg_submit_tx_max_messages` | uint64 | Maximum number of messages allowed in a single MsgSubmitTx |
| `register_fee` | []Coin | Minimum fee required to register an interchain account |

### Default Values

```json
{
  "msg_submit_tx_max_messages": "16",
  "register_fee": [
    {
      "denom": "untrn",
      "amount": "1000000"
    }
  ]
}
```

## Messages

### MsgRegisterInterchainAccount

Registers an interchain account on a remote chain through an IBC connection.

```protobuf
message MsgRegisterInterchainAccount {
  string from_address = 1;
  string connection_id = 2;
  string interchain_account_id = 3;
  repeated cosmos.base.v1beta1.Coin register_fee = 4;
  ibc.core.channel.v1.Order ordering = 5;
}
```

#### Parameters

| Field | Type | Description |
| --- | --- | --- |
| `from_address` | string | The address initiating the registration request (typically a contract address) |
| `connection_id` | string | ID of the IBC connection to use for the interchain account |
| `interchain_account_id` | string | Custom identifier for the interchain account (used in port ID) |
| `register_fee` | []Coin | Fee paid for registering the interchain account |
| `ordering` | Order | Channel ordering (typically ORDERED for interchain accounts) |

#### Response

```protobuf
message MsgRegisterInterchainAccountResponse {
  string channel_id = 1;
  string port_id = 2;
}
```

| Field | Type | Description |
| --- | --- | --- |
| `channel_id` | string | The ID of the newly created IBC channel |
| `port_id` | string | The port ID associated with the interchain account |

#### Processing Flow

1. The module validates that the connection ID exists
2. Creates a unique port ID in the format `icacontroller-{from_address}.{interchain_account_id}`
3. Claims the port capability and initiates a channel opening handshake with the remote chain
4. The register fee is charged to the sender account
5. Channel and port information are returned immediately
6. Once the channel is established, a callback is sent to the initiating contract

#### Contract Example

```rust
use neutron_sdk::bindings::msg::NeutronMsg;

let register_msg = NeutronMsg::RegisterInterchainAccount {
    connection_id: "connection-0".to_string(),
    interchain_account_id: "my-account".to_string(),
    register_fee: vec![Coin {
        denom: "untrn".to_string(),
        amount: Uint128::from(1000000u128),
    }],
};
```

### MsgSubmitTx

Submits a transaction for execution on a remote chain through an interchain account.

```protobuf
message MsgSubmitTx {
  string from_address = 1;
  string interchain_account_id = 2;
  string connection_id = 3;
  repeated google.protobuf.Any msgs = 4;
  string memo = 5;
  uint64 timeout = 6;
  neutron.feerefunder.Fee fee = 7;
}
```

#### Parameters

| Field | Type | Description |
| --- | --- | --- |
| `from_address` | string | The address submitting the transaction (typically a contract address) |
| `interchain_account_id` | string | The identifier of the interchain account to use |
| `connection_id` | string | The ID of the IBC connection to use |
| `msgs` | []Any | The messages to execute on the remote chain |
| `memo` | string | An optional memo to include with the transaction |
| `timeout` | uint64 | The timeout in seconds after which the packet times out |
| `fee` | Fee | The fees to pay for packet relaying |

#### Response

```protobuf
message MsgSubmitTxResponse {
  uint64 sequence_id = 1;
  string channel = 2;
}
```

| Field | Type | Description |
| --- | --- | --- |
| `sequence_id` | uint64 | The sequence ID of the IBC packet (unique per channel) |
| `channel` | string | The source channel ID on Neutron from which the transaction was submitted |

#### Contract Example

```rust
let submit_msg = NeutronMsg::SubmitTx {
    connection_id: "connection-0".to_string(),
    interchain_account_id: "my-account".to_string(),
    msgs: vec![/* your cosmos messages */],
    memo: "".to_string(),
    timeout: 3600,
    fee: Fee {
        recv_fee: vec![Coin {
            denom: "untrn".to_string(),
            amount: Uint128::from(2000u128),
        }],
        ack_fee: vec![Coin {
            denom: "untrn".to_string(),
            amount: Uint128::from(1000u128),
        }],
        timeout_fee: vec![Coin {
            denom: "untrn".to_string(),
            amount: Uint128::from(1000u128),
        }],
    },
};
```

### MsgUpdateParams

Updates the module parameters (governance-only message).

```protobuf
message MsgUpdateParams {
  string authority = 1;
  Params params = 2;
}
```

#### Parameters

| Field | Type | Description |
| --- | --- | --- |
| `authority` | string | The governance account address |
| `params` | Params | The new module parameters |

#### Response

```protobuf
message MsgUpdateParamsResponse {}
```

## Query Endpoints

### Params

Retrieves the current parameters of the Interchain Transactions module.

**Endpoint:** `/neutron/interchaintxs/params`

**Request:**
```protobuf
message QueryParamsRequest {}
```

**Response:**
```protobuf
message QueryParamsResponse {
  Params params = 1;
}
```

#### CLI Example

<Info>
The module only supports query CLI commands. There are no transaction CLI commands as the module is exclusively designed for CosmWasm smart contract integration.
</Info>

```bash
neutron query interchaintxs params
```

#### Response Example

```json
{
  "params": {
    "msg_submit_tx_max_messages": "16",
    "register_fee": [
      {
        "denom": "untrn",
        "amount": "1000000"
      }
    ]
  }
}
```

#### gRPC Example

```bash
grpcurl -plaintext localhost:9090 neutron.interchaintxs.v1.Query/Params
```

### InterchainAccountAddress

Retrieves the address of an interchain account on a remote chain.

**Endpoint:** `/neutron/interchaintxs/{owner_address}/{interchain_account_id}/{connection_id}/interchain_account_address`

**Request:**
```protobuf
message QueryInterchainAccountAddressRequest {
  string owner_address = 1;
  string interchain_account_id = 2;
  string connection_id = 3;
}
```

**Response:**
```protobuf
message QueryInterchainAccountAddressResponse {
  string interchain_account_address = 1;
}
```

#### CLI Example

```bash
neutron query interchaintxs interchain-account neutron1abcdef... connection-0 myaccount
```

#### Response Example

```json
{
  "interchain_account_address": "cosmos1xyz..."
}
```

#### gRPC Example

```bash
grpcurl -plaintext \
    -d '{"owner_address": "neutron1...", "interchain_account_id": "myaccount", "connection_id": "connection-0"}' \
    localhost:9090 \
    neutron.interchaintxs.v1.Query/InterchainAccountAddress
```

## Events

<Warning>
The Interchain Transactions module does not emit any custom events. All events related to interchain account registration and transaction submission are emitted by the underlying IBC stack (ICA controller module, channel keeper, etc.) rather than this module directly.
</Warning>

To monitor interchain transactions, listen for IBC events from:
- **ICA Controller module** - for account registration and transaction acknowledgements
- **Channel keeper** - for packet send/receive events  
- **Port keeper** - for port binding events

For specific event monitoring, refer to the IBC and ICA documentation in the Cosmos SDK.

## State

### Genesis State

The module's genesis state contains the module parameters:

```go
type GenesisState struct {
    Params Params `protobuf:"bytes,1,opt,name=params,proto3" json:"params"`
}
```

### Module Parameters

The module parameters are stored in the params subspace:

```go
type Params struct {
    // Maximum number of messages in MsgSubmitTx
    MsgSubmitTxMaxMessages uint64 `protobuf:"varint,1,opt,name=msg_submit_tx_max_messages,json=msgSubmitTxMaxMessages,proto3" json:"msg_submit_tx_max_messages,omitempty"`
    // Minimum fee required to register interchain account
    RegisterFee github_com_cosmos_cosmos_sdk_types.Coins `protobuf:"bytes,2,rep,name=register_fee,json=registerFee,proto3,castrepeated=github.com/cosmos/cosmos-sdk/types.Coins" json:"register_fee"`
}
```

### State Objects

The module maintains several key-value pairs in the store:

#### Port-to-Owner Mapping

Maps a port ID to the owner address and interchain account ID.

**Key Format:** `portID → {owner_address, interchain_account_id}`

This mapping allows the module to quickly determine which contract and interchain account ID are associated with a particular IBC port.

#### Channel-to-Port Mapping

Maps a channel ID to its associated port ID.

**Key Format:** `channelID → portID`

This mapping enables the module to find the correct port ID when handling channel acknowledgements and timeouts.

#### Owner-to-Interchain Account Address Mapping

Maps a combination of owner address, interchain account ID, and connection ID to the remote interchain account address.

**Key Format:** `{owner_address}|{interchain_account_id}|{connection_id} → remote_account_address`

This mapping allows contracts to query the address of their interchain accounts on remote chains.

### State Transitions

#### Interchain Account Registration

1. A new port and channel are created for the interchain account
2. The port-to-owner mapping is stored
3. The channel-to-port mapping is stored

#### Channel Acknowledgement

1. The remote interchain account address is extracted from the acknowledgement
2. The owner-to-interchain account address mapping is stored

#### Transaction Submission

1. The port and channel for the specified interchain account ID are looked up
2. The transaction is sent through the appropriate IBC channel
3. No state changes occur in the module itself during this operation

## Contract Integration

### Sudo Callbacks

The module sends sudo callbacks to contracts for IBC events:

#### OpenAck Callback

Sent when an interchain account channel is successfully opened:

```rust
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]
pub struct OpenAck {
    pub port_id: String,
    pub channel_id: String,
    pub counterparty_channel_id: String,
    pub counterparty_version: String,
}
```

#### Response Callback

Sent when an interchain transaction receives an acknowledgement:

```rust
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]
pub struct Response {
    pub request: RequestPacket,
    pub data: Binary,
}
```

#### Error Callback

Sent when an interchain transaction fails:

```rust
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]
pub struct ErrorResponse {
    pub request: RequestPacket,
    pub details: String,
}
```

#### Timeout Callback

Sent when an interchain transaction times out:

```rust
#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]
pub struct TimeoutResponse {
    pub request: RequestPacket,
}
```

### Error Handling

The module uses the [Contract Manager](/developers/modules/contractmanager/overview) module for sudo callback error handling:

- Sudo errors are suppressed to prevent acknowledgement resubmission
- Gas limits are enforced on sudo callbacks
- Failed callbacks are recorded for later resubmission

### Port ID Format

Interchain account port IDs follow the format:
```
icacontroller-{contract_address}.{interchain_account_id}
```

Example: `icacontroller-neutron1abcdef...xyz.myaccount`

### Implementation Examples

For complete implementation examples, refer to:
- [How-to Guide](/developers/modules/interchaintxs/how-to) - Detailed implementation examples
- [Explanation](/developers/modules/interchaintxs/explanation) - Concepts and design rationale

## Error Codes

Error codes returned by the module:

| Code | Error | Description |
|------|-------|-------------|
| `1100` | `ErrInvalidICAOwner` | Invalid interchain account interchainAccountID |
| `1101` | `ErrInvalidAccountAddress` | Invalid account address |
| `1102` | `ErrInterchainAccountNotFound` | Interchain account not found |
| `1103` | `ErrNotContract` | Not a contract |
| `1104` | `ErrEmptyInterchainAccountID` | Empty interchain account id |
| `1105` | `ErrEmptyConnectionID` | Empty connection id |
| `1106` | `ErrNoMessages` | No messages provided |
| `1107` | `ErrInvalidTimeout` | Invalid timeout |
| `1108` | `ErrInvalidPayerFee` | Invalid payer feerefunder |
| `1109` | `ErrLongInterchainAccountID` | Interchain account id is too long |
| `1110` | `ErrInvalidType` | Invalid type |

## Constants

| Constant | Value | Description |
|----------|-------|-------------|
| `ConsensusVersion` | `2` | Current consensus version |
| `Delimiter` | `"."` | Delimiter used in port ID construction |
| `ModuleName` | `"interchaintxs"` | Module name identifier | 