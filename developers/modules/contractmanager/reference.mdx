---
title: "Reference"
description: "Technical reference for the Contract Manager module"
---

The Contract Manager module manages sudo call failures and provides resubmission capabilities for IBC-related contract operations.

## Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| `sudo_call_gas_limit` | uint64 | Maximum gas that can be used during a sudo call to a contract |

## Core Data Structure

### Failure

```protobuf
message Failure {
  // Address of the failed contract
  string address = 1;
  // Id of the failure under specific address
  uint64 id = 2;
  // Serialized MessageSudoCallback with Packet and Ack(if exists)
  bytes sudo_payload = 3;
  // Redacted error response of the sudo call. Full error is emitted as an event
  string error = 4;
}
```

## CosmWasm Bindings

### ResubmitFailure Message

Allows contracts to resubmit their own failed operations:

```rust
pub enum NeutronMsg {
    ResubmitFailure {
        failure_id: u64,
    },
    // other messages...
}
```

**Permissions**: Only the original contract can resubmit its own failures.

### ContractManagerFailures Query

Query failures for a specific contract:

```rust
pub enum NeutronQuery {
    ContractManagerFailures {
        address: String,
        pagination: Option<PageRequest>,
    },
    // other queries...
}
```

**Response**:
```rust
pub struct FailuresResponse {
    pub failures: Vec<Failure>,
    pub pagination: Option<PageResponse>,
}
```

## Key Concepts

- **Sudo Gas Limit**: Sudo calls are limited to prevent infinite recursion
- **Failure Storage**: Failed sudo calls are stored with full context for resubmission
- **Error Redaction**: Stored errors are redacted (codespace + code only) for determinism
- **Resubmission**: Contracts can resubmit their own failures without gas limits
- **IBC Integration**: Primarily used for IBC acknowledgement and timeout handling

## SudoLimitWrapper

The module provides middleware that:
1. Limits gas usage during sudo calls
2. Captures and stores failures for later resubmission
3. Converts out-of-gas panics to error responses 